
<form action="#" [formGroup]="mmsForm" novalidate
      (ngSubmit)="submit()"
      fxLayout="row wrap"
      style="justify-content: space-between"
      fxLayout.lt-sm="column"
      fxLayoutGap.lt-sm = "0"
>
  <div
    *ngFor="let element of form.elements"
    [fxFlex]=getSizeDefault(element?.size)
    fxFlex.lt-sm="100%"
    fxFlex.lt-md="0 1 calc(50% - 32px)">
    <div [ngSwitch]="element.type">

      <!-- TEXT INPUT -->
      <ng-container *ngSwitchCase="'text'" >
        <mat-form-field [appearance]="'outline'">
          <mat-label>{{element.placeholder}}</mat-label>
          <input matInput type="text"
                 [spellcheck]="false"
                 [formControlName]="element.name"
                 placeholder="{{element.placeholder}}"
                 value="{{element.defaultValue}}" />
          <mat-error>
            {{errors && errors[element.name]}}
          </mat-error>
        </mat-form-field>
      </ng-container>

      <!-- PASSWORD INPUT -->
      <ng-container *ngSwitchCase="'password'">
        <mat-form-field [appearance]="'outline'">
          <mat-label>{{element.placeholder}}</mat-label>
          <input matInput type="password"
                 [spellcheck]="false"
                 [formControlName]="element.name"
                 placeholder="{{element.placeholder}}"
                 value="{{element.defaultValue}}" />
          <mat-error>
            {{errors && errors[element.name]}}
          </mat-error>
        </mat-form-field>
      </ng-container>


      <!-- NUMBER INPUT -->
      <ng-container *ngSwitchCase="'number'">
        <mat-form-field [appearance]="'outline'">
          <mat-label>{{element.placeholder}}</mat-label>
          <input matInput type="number"
                 [spellcheck]="false"
                 [formControlName]="element.name"
                 placeholder="{{element.placeholder}}"
                 value="{{element.defaultValue}}" />
          <mat-error>
            {{errors && errors[element.name]}}
          </mat-error>
        </mat-form-field>
      </ng-container>


      <!-- EMAIL INPUT -->
      <ng-container *ngSwitchCase="'email'">
        <mat-form-field [appearance]="'outline'">
          <mat-label>{{element.placeholder}}</mat-label>
          <input matInput type="text"
                 [spellcheck]="false"
                 [formControlName]="element.name"
                 placeholder="{{element.placeholder}}"
                 value="{{element.defaultValue}}" />
          <mat-error>
            {{errors && errors[element.name]}}
          </mat-error>
        </mat-form-field>
      </ng-container>


      <!-- RADIO INPUT -->
      <ng-container *ngSwitchCase="'radio'">
        <div class="misc-bottom-padding">
          <mat-label>{{element.placeholder}}:</mat-label>
          <mat-radio-group color="primary"
                           aria-label="Select an option"
                           [formControlName]="element.name">
            <mat-radio-button *ngFor="let option of element?.options"
                              [value]="option.value">
              {{option.label}}
            </mat-radio-button>
          </mat-radio-group>
        </div>
      </ng-container>


      <!-- DATE PICKER -->
      <ng-container *ngSwitchCase="'date'">
        <mat-form-field [appearance]="'outline'">
          <mat-label>{{element.placeholder}}</mat-label>
          <input matInput readonly
                 [matDatepicker]="picker" [placeholder]="element.placeholder"
                 [formControlName]="element.name"
                 (dateChange)="dateChanged($event, element.name)">
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
          <!-- error -->
          <mat-error>
            {{errors && errors[element.name]}}
          </mat-error>
        </mat-form-field>
      </ng-container>

      <!-- SELECT INPUT -->
      <ng-container *ngSwitchCase="'select'">
        <mat-form-field [appearance]="'outline'">
          <mat-label>{{element.placeholder}}</mat-label>
          <mat-select [formControlName]="element.name">
            <mat-option  *ngFor="let option of data[element.name] ? data[element.name] : filterByValue(element) | async" [value]="option.value">
              {{option.label}}
            </mat-option>
          </mat-select>
          <!-- error -->
          <mat-error>
            {{errors && errors[element.name]}}
          </mat-error>
        </mat-form-field>
      </ng-container>
    </div>
  </div>
</form>
